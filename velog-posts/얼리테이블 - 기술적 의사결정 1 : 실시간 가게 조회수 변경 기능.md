<h1 id="실시간-가게-조회수-기능">실시간 가게 조회수 기능</h1>
<p>서비스에서는 사용자가 특정 가게 상세 조회 페이지에 진입하면 해당 가게의 조회수가 증가하고, 페이지를 벗어나면 감소하는 동적 기능이 필요합니다. 이를 위해 여러 통신 기술(SSE, WebSocket, RabbitMQ, Kafka)을 고려하였으며, 각 기술의 장단점을 아래와 같이 비교했습니다. 또한 이 조회수를 다른 사용자에게 전달하기 위해 메시징 이벤트가 필요합니다. 이 메시징 이벤트를 구현하기 위해 Redis의 Pub/Sub 기능을 활용했습니다.</p>
<p><img alt="" src="https://velog.velcdn.com/images/take_the_king/post/c18198dc-59ac-4fd5-af06-77f055636b3d/image.JPG" /></p>
<h1 id="1-기술-비교">1. 기술 비교</h1>
<table>
<thead>
<tr>
<th>항목</th>
<th>SSE</th>
<th>WebSocket</th>
<th>RabbitMQ</th>
<th>Kafka</th>
</tr>
</thead>
<tbody><tr>
<td><strong>장점</strong></td>
<td>- 서버에서 클라이언트로의 단방향 실시간 알림 전송에 최적화됨<br />- HTTP 기반으로 브라우저에서 기본 지원되어 구현이 단순함<br />- 연결 유지 오버헤드가 낮아 조회수 업데이트와 같이 빈번한 이벤트 전송에 적합함</td>
<td>- 양방향 통신 지원으로 서버와 클라이언트가 자유롭게 데이터 교환 가능<br />- 실시간성이 매우 뛰어나며 지속적인 데이터 교환이 가능함</td>
<td>- 메시지 큐 기반으로 신뢰성 있는 비동기 메시징 제공<br />- 복잡한 메시지 라우팅 및 보증 기능 우수</td>
<td>- 대규모 데이터 스트림 처리에 최적화됨<br />- 확장성과 처리량 면에서 강점을 가짐</td>
</tr>
<tr>
<td><strong>단점</strong></td>
<td>- 클라이언트에서 서버로의 양방향 통신이 불가능하여 양방향 데이터 교환이 필요한 경우 부적합함</td>
<td>- 단순 조회수 업데이트와 같이 서버 → 클라이언트 단방향 알림만 필요한 경우, 구현 복잡성과 리소스 관리 부담이 큼</td>
<td>- 단순 실시간 알림 전송보다는 비동기 작업 처리에 적합하여 설정 및 운영이 복잡하고 오버헤드가 큼</td>
<td>- 설치 및 운영 부담이 크며, 단순 실시간 이벤트 전송에는 과도한 리소스 소모가 발생함</td>
</tr>
</tbody></table>
<h1 id="2-sse-선택-이유">2. SSE 선택 이유</h1>
<p>이 서비스에서는 실시간 단방향 알림 기능만 필요하므로, SSE(Server-Sent Events)를 선택했습니다.</p>
<p>조회수는 단순히 증감하는 이벤트이므로 양방향 통신이 필요 없습니다.</p>
<p>서비스에서 조회수 기능은 “사용자가 페이지에 들어갔을 때 증가, 나갔을 때 감소”하는 이벤트로, 클라이언트로 실시간 알림을 보내면 되므로 복잡한 양방향 통신이 필요하지 않습니다.</p>
<p>SSE는 HTTP 기반으로 브라우저에서 기본적으로 지원되며, 추가적인 라이브러리 없이 쉽게 구현 가능합니다.</p>
<p>지속적인 연결 유지가 필요하지만, WebSocket처럼 복잡한 핸드셰이크 및 연결 유지 관리가 필요 없습니다.</p>
<p>서버에서 클라이언트로만 데이터 전송이 가능하므로, 실시간 조회수 갱신에 적합합니다.</p>
<h1 id="3-redis-pubsub-활용">3. Redis Pub/Sub 활용</h1>
<p>사용자가 특정 가게의 상세 조회 페이지에 들어가면 Redis의 Pub 이벤트가 발생합니다. 해당 페이지에 이미 접속해 있는 사용자들은 Sub 이벤트를 수신하여 실시간으로 조회수를 업데이트 받습니다.</p>
<p><strong>실시간 반영</strong>: 사용자가 페이지에 들어가거나 나갈 때마다 즉각적으로 조회수가 업데이트되어 사용자 경험을 향상시킵니다.</p>
<p><strong>경량화</strong>: 별도의 무거운 메시지 큐 시스템 없이, Redis의 경량 Pub/Sub 기능을 통해 빠른 메시지 전달이 가능해집니다.</p>
<p><strong>확장성</strong>: 여러 서버 인스턴스 간에도 이벤트 전달이 원활하여, 트래픽이 증가하더라도 안정적인 성능을 유지할 수 있습니다.</p>
<h1 id="4-결론">4. 결론</h1>
<p>실시간 가게 조회수 기능은 사용자가 현재 보고있는 가게의 인기와 경쟁도를 확인하고 예약을 촉진시킬 수 있는 기능입니다. </p>
<p>이 기능을 구현하기 위해서는 서버와 클라이언트가 지속적으로 연결이 유지되는 통신 기술이 필요하고 조회 수 변경 감지에 따른 조회 수 업데이트가 필요하기 때문에 메세지 이벤트 시스템이 필요했습니다.</p>
<p>이 요구사항에 맞게 여러 기술을 비교해보고, SSE와 Redis의 Pub/Sub 기술을 이 서비스에 적합하다고 판단하여 적용하게 되었습니다.</p>